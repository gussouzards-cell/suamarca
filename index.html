<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xuxu Pizza OS</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

    <style>
        /* --- VARIÁVEIS DE TEMA (ESTILO SHADCN/APPLE DARK) --- */
        :root {
            --bg-app: #09090b;       /* Fundo quase preto */
            --bg-card: #18181b;      /* Cinza muito escuro */
            --bg-hover: #27272a;     /* Cinza para hover */
            --border: #27272a;       /* Bordas sutis */
            --primary: #fafafa;      /* Branco puro para destaque */
            --primary-fg: #18181b;   /* Texto preto no botão branco */
            --text-main: #e4e4e7;    /* Texto principal */
            --text-muted: #a1a1aa;   /* Texto secundário */
            --accent: #f59e0b;       /* Laranja sofisticado para detalhes */
            --radius: 0.75rem;       /* Arredondamento moderno */
            --shadow: 0 10px 30px -10px rgba(0,0,0,0.5);
        }

        * { box-sizing: border-box; outline: none; }

        body {
            margin: 0;
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-app);
            color: var(--text-main);
            -webkit-font-smoothing: antialiased;
            min-height: 100vh;
        }

        /* --- LAYOUT GERAL --- */
        .app-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px;
            display: grid;
            grid-template-columns: 1fr 400px; /* Menu grande, Carrinho lateral */
            gap: 40px;
        }

        header {
            grid-column: 1 / -1;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--border);
            padding-bottom: 20px;
        }
        
        /* --- ESTILO DO LOGO --- */
        .brand-logo {
            height: 60px; /* Ajuste a altura conforme desejar */
            width: auto;
            image-rendering: -webkit-optimize-contrast; /* Para manter a nitidez */
        }
        .header-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }


        h1 { font-weight: 700; font-size: 1.8rem; letter-spacing: -0.05em; color: var(--primary); margin: 0; }
        h1 span { color: var(--accent); }
        h2 { font-size: 1.2rem; font-weight: 600; margin-bottom: 1rem; }

        /* --- GRID DE PIZZAS --- */
        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            gap: 20px;
        }

        .card {
            background-color: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 20px;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            position: relative;
            overflow: hidden;
        }

        .card:hover {
            border-color: var(--text-muted);
            transform: translateY(-4px);
            box-shadow: var(--shadow);
        }

        .card-header h3 { margin: 0 0 5px 0; font-size: 1.1rem; }
        .card-desc { color: var(--text-muted); font-size: 0.9rem; line-height: 1.4; margin-bottom: 15px; }
        
        .card-footer { display: flex; justify-content: space-between; align-items: center; margin-top: auto; }
        .price-tag { font-weight: 600; color: var(--primary); font-size: 1.1rem; }

        /* --- BOTÕES ESTILO APPLE --- */
        .btn {
            background-color: var(--primary);
            color: var(--primary-fg);
            border: none;
            padding: 10px 16px;
            border-radius: calc(var(--radius) - 4px);
            font-weight: 600;
            font-size: 0.85rem;
            cursor: pointer;
            transition: opacity 0.2s;
        }
        .btn:hover { opacity: 0.9; }
        
        .btn-outline {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text-main);
        }
        .btn-outline:hover { background: var(--bg-hover); }

        .btn-icon { padding: 5px 10px; font-size: 0.8rem; }

        /* --- ÁREA DO CARRINHO (FIXA/STICKY) --- */
        .sidebar {
            position: sticky;
            top: 40px;
            height: fit-content;
            background-color: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 25px;
            box-shadow: var(--shadow);
        }

        /* Inputs modernos */
        .input-group { margin-bottom: 20px; }
        input[type="text"] {
            width: 100%;
            background: transparent;
            border: 1px solid var(--border);
            padding: 12px;
            border-radius: calc(var(--radius) - 4px);
            color: var(--primary);
            font-family: inherit;
            transition: border 0.2s;
        }
        input[type="text"]:focus { border-color: var(--text-muted); }

        .cart-list {
            max-height: 300px;
            overflow-y: auto;
            margin-bottom: 20px;
        }
        
        /* Scrollbar customizada (fina e escura) */
        .cart-list::-webkit-scrollbar { width: 6px; }
        .cart-list::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid var(--border);
            font-size: 0.95rem;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateX(10px); } to { opacity: 1; transform: translateX(0); } }

        .cart-total {
            display: flex;
            justify-content: space-between;
            font-size: 1.2rem;
            font-weight: 700;
            margin: 20px 0;
            padding-top: 20px;
            border-top: 1px solid var(--border);
        }

        .btn-checkout { width: 100%; padding: 14px; font-size: 1rem; background-color: var(--primary); }

        /* --- HISTÓRICO (TABELA MINIMALISTA) --- */
        .history-container {
            grid-column: 1 / -1;
            margin-top: 40px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 25px;
        }

        table { width: 100%; border-collapse: collapse; }
        th { text-align: left; color: var(--text-muted); font-size: 0.85rem; padding-bottom: 15px; border-bottom: 1px solid var(--border); font-weight: 500; text-transform: uppercase; letter-spacing: 0.05em; }
        td { padding: 15px 0; border-bottom: 1px solid var(--border); font-size: 0.95rem; }
        tr:last-child td { border-bottom: none; }

        /* --- MODAL (RECIBO) --- */
        .modal-backdrop {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(8px); /* Efeito de vidro fosco */
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 100;
        }

        .receipt-modal {
            background: #fff; /* Recibo branco para contraste ou impressão */
            color: #000;
            width: 320px;
            padding: 30px;
            border-radius: 5px; /* Cantos retos estilo papel */
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            font-family: 'Courier New', Courier, monospace;
            position: relative;
            animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }

        @keyframes slideUp { from { opacity: 0; transform: translateY(50px) scale(0.95); } to { opacity: 1; transform: translateY(0) scale(1); } }

        .receipt-header-logo {
            text-align: center;
            margin-bottom: 10px;
        }
        .receipt-header-logo img {
            height: 40px; /* Logo menor no recibo */
            width: auto;
        }

        .receipt-title { text-align: center; font-weight: bold; margin-bottom: 5px; text-transform: uppercase; }
        .dashed { border-top: 1px dashed #000; margin: 15px 0; }
        .receipt-row { display: flex; justify-content: space-between; margin-bottom: 5px; font-size: 0.9rem; }
        
        .modal-actions { margin-top: 20px; display: flex; gap: 10px; }
        .modal-actions button { width: 100%; border-radius: 4px; }
        .btn-print-modal { background: #000; color: #fff; }
        .btn-close-modal { background: #e5e5e5; color: #000; }

        /* Ajustes Mobile */
        @media (max-width: 900px) {
            .app-container { grid-template-columns: 1fr; }
            .sidebar { order: -1; position: relative; top: 0; }
        }

        /* --- MODO IMPRESSÃO (Oculta a UI Dark, mostra só o papel) --- */
        @media print {
            body * { visibility: hidden; }
            .receipt-modal, .receipt-modal * { visibility: visible; }
            .receipt-modal { position: absolute; top: 0; left: 0; width: 100%; box-shadow: none; padding: 0; }
            .modal-actions { display: none; }
            .modal-backdrop { background: white; position: absolute; }
        }
    </style>
</head>
<body>

    <div class="app-container">
        
        <header>
            <div class="header-info">
                <img src="logo_xuxu_pizza.png" alt="Xuxu Pizza Logo" class="brand-logo">
                <div style="font-size: 0.9rem; color: var(--text-muted);">v2.0.4 &bull; System Ready</div>
            </div>
        </header>

        <main>
            <h2>Cardápio Disponível</h2>
            <div id="menu-grid" class="menu-grid">
                </div>

            <div class="history-container">
                <h2>Registro de Pedidos</h2>
                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Hora</th>
                            <th>Cliente</th>
                            <th>Itens</th>
                            <th style="text-align: right;">Total</th>
                        </tr>
                    </thead>
                    <tbody id="history-body">
                        <tr>
                            <td colspan="5" style="text-align: center; color: var(--text-muted); padding: 20px;">
                                Nenhum registro encontrado hoje.
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </main>

        <aside class="sidebar">
            <h2>Novo Pedido</h2>
            
            <div class="input-group">
                <input type="text" id="client-name" placeholder="Nome do Cliente" autocomplete="off">
            </div>

            <div id="cart-list" class="cart-list">
                <div style="text-align: center; color: var(--text-muted); padding: 20px 0;">
                    Selecione um item do menu
                </div>
            </div>

            <div class="cart-total">
                <span>Total</span>
                <span>R$ <span id="total-value">0.00</span></span>
            </div>

            <button class="btn btn-checkout" onclick="processarPedido()">
                Finalizar Pedido
            </button>
        </aside>

    </div>

    <div class="modal-backdrop" id="receipt-overlay">
        <div class="receipt-modal">
            <div class="receipt-header-logo">
                <img src="logo_xuxu_pizza.png" alt="Xuxu Pizza Logo">
            </div>
            
            <div style="text-align: center; font-size: 0.8rem;">Rua do Futuro, 2077</div>
            
            <div class="dashed"></div>
            
            <div id="receipt-details">
                </div>

            <div class="dashed"></div>
            
            <div id="receipt-items">
                </div>

            <div class="dashed"></div>
            
            <div class="receipt-row" style="font-weight: bold; font-size: 1.1rem;">
                <span>TOTAL</span>
                <span id="receipt-total">R$ 0,00</span>
            </div>
            
            <div style="text-align: center; margin-top: 20px; font-size: 0.8rem;">
                Obrigado pela preferência!
            </div>

            <div class="modal-actions">
                <button class="btn btn-print-modal" onclick="window.print()">Imprimir</button>
                <button class="btn btn-close-modal" onclick="fecharModal()">Fechar</button>
            </div>
        </div>
    </div>

    <script>
        // --- DADOS & ESTADO ---
        const menuItems = [
            { id: 1, nome: "Cyber Cheese", desc: "Blend de 4 queijos com orégano sintético.", preco: 45.00 },
            { id: 2, nome: "Pepperoni X", desc: "Pepperoni crocante com cebola caramelizada.", preco: 50.00 },
            { id: 3, nome: "Marguerita 2.0", desc: "Tomate confit, manjericão fresco e mussarela.", preco: 42.00 },
            { id: 4, nome: "Frango Neural", desc: "Frango desfiado com catupiry cremoso.", preco: 48.00 },
            { id: 5, nome: "Bacon Blast", desc: "Muito bacon, milho e mussarela.", preco: 46.00 },
            { id: 6, nome: "Veggie Bot", desc: "Palmito, brócolis, champignon e ervas.", preco: 44.00 },
        ];

        let carrinho = [];
        let historico = [];
        let orderIdCounter = 1024; // Começa num número "tech"

        // --- INICIALIZAÇÃO ---
        document.addEventListener('DOMContentLoaded', () => {
            renderMenu();
        });

        function renderMenu() {
            const grid = document.getElementById('menu-grid');
            grid.innerHTML = '';

            menuItems.forEach(item => {
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                    <div class="card-header">
                        <h3>${item.nome}</h3>
                        <div class="card-desc">${item.desc}</div>
                    </div>
                    <div class="card-footer">
                        <span class="price-tag">R$ ${item.preco.toFixed(2)}</span>
                        <button class="btn btn-outline" onclick="addCarrinho(${item.id})">
                            + Adicionar
                        </button>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        // --- LÓGICA DO CARRINHO ---
        function addCarrinho(id) {
            const item = menuItems.find(p => p.id === id);
            carrinho.push(item);
            renderCarrinho();
        }

        function removeCarrinho(index) {
            carrinho.splice(index, 1);
            renderCarrinho();
        }

        function renderCarrinho() {
            const list = document.getElementById('cart-list');
            const totalEl = document.getElementById('total-value');
            
            list.innerHTML = '';
            
            if (carrinho.length === 0) {
                list.innerHTML = '<div style="text-align: center; color: var(--text-muted); padding: 20px 0;">Carrinho vazio</div>';
                totalEl.innerText = '0.00';
                return;
            }

            let total = 0;
            carrinho.forEach((item, index) => {
                total += item.preco;
                const div = document.createElement('div');
                div.className = 'cart-item';
                div.innerHTML = `
                    <span>${item.nome}</span>
                    <div>
                        <span style="margin-right: 10px;">R$ ${item.preco.toFixed(2)}</span>
                        <button class="btn btn-outline btn-icon" onclick="removeCarrinho(${index})">✕</button>
                    </div>
                `;
                list.appendChild(div);
            });

            totalEl.innerText = total.toFixed(2);
        }

        // --- PROCESSAMENTO DE PEDIDO ---
        function processarPedido() {
            const nome = document.getElementById('client-name').value.trim();

            if (!nome) {
                alert("⚠️ Sistema: Identifique o cliente para prosseguir.");
                return;
            }
            if (carrinho.length === 0) {
                alert("⚠️ Sistema: O carrinho está vazio.");
                return;
            }

            const total = carrinho.reduce((acc, item) => acc + item.preco, 0);
            const dataAgora = new Date();

            const pedido = {
                id: orderIdCounter++,
                cliente: nome,
                itens: [...carrinho],
                total: total,
                horario: dataAgora.toLocaleTimeString('pt-BR', {hour: '2-digit', minute:'2-digit'}),
                dataCompleta: dataAgora.toLocaleString()
            };

            // Salvar no histórico
            historico.unshift(pedido); // Adiciona no começo
            
            // Atualizar UI
            renderHistorico();
            abrirComanda(pedido);
            
            // Resetar
            carrinho = [];
            document.getElementById('client-name').value = '';
            renderCarrinho();
        }

        // --- HISTÓRICO ---
        function renderHistorico() {
            const tbody = document.getElementById('history-body');
            tbody.innerHTML = '';

            historico.forEach(ped => {
                const tr = document.createElement('tr');
                const resumoItens = ped.itens.length + (ped.itens.length === 1 ? ' Pizza' : ' Pizzas');
                tr.innerHTML = `
                    <td style="font-family: monospace; color: var(--accent);">#${ped.id}</td>
                    <td>${ped.horario}</td>
                    <td style="font-weight: 600;">${ped.cliente}</td>
                    <td style="color: var(--text-muted);">${resumoItens}</td>
                    <td style="text-align: right;">R$ ${ped.total.toFixed(2)}</td>
                `;
                tbody.appendChild(tr);
            });
        }

        // --- MODAL / COMANDA ---
        function abrirComanda(pedido) {
            const overlay = document.getElementById('receipt-overlay');
            const details = document.getElementById('receipt-details');
            const itemsDiv = document.getElementById('receipt-items');
            const totalSpan = document.getElementById('receipt-total');

            details.innerHTML = `
                <div class="receipt-row"><span>PEDIDO:</span> <span>#${pedido.id}</span></div>
                <div class="receipt-row"><span>DATA:</span> <span>${pedido.dataCompleta}</span></div>
                <div class="receipt-row"><span>CLIENTE:</span> <span>${pedido.cliente}</span></div>
            `;

            itemsDiv.innerHTML = '';
            pedido.itens.forEach(item => {
                itemsDiv.innerHTML += `
                    <div class="receipt-row">
                        <span>${item.nome}</span>
                        <span>${item.preco.toFixed(2)}</span>
                    </div>
                `;
            });

            totalSpan.innerText = `R$ ${pedido.total.toFixed(2)}`;
            overlay.style.display = 'flex';
        }

        function fecharModal() {
            document.getElementById('receipt-overlay').style.display = 'none';
        }
    </script>
</body>
</html>